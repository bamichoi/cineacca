{% extends "base.html" %}

{% block page_title %}
    Cerca con {{ keyword }}
{% endblock page_title %}

{% block movie_search_bar %}
{% endblock movie_search_bar %}


{% block content %}
    <div id="student-list_title">
        <h1>&nbsp;Gli studenti&nbsp;&nbsp;&nbsp;</h1>
    </div>

    <p class="menu_description">Ecco i futuri del cinematografico italiano, trovate i vostri mebri di troppe</p>

    
    <div class="search_bar">
        <form method="get" action="{% url 'users:search' %}">
            <input {% if keyword %}value="{{keyword}}"{% endif %} name="keyword" type="text" placeholder="Cerca un/una artista con il suo nome o cognome" />
            <button>Cerca!</button>
        </form>
    </div>
    
    <div id="student_filter-by">
        <div class="filter-box">
            <a href="?keyword={{ keyword }}&filter_by=1&sort={{ sort }}"><div><i class="fas fa-bullhorn ico_direction"></i> regia</div></a>
            <a href="?keyword={{ keyword }}&filter_by=7&sort={{ sort }}"><div><i class="fas fa-microphone-alt ico_audio"></i> audio</div></a>
            
        </div>
        <div class="filter-box">
            <a href="?keyword={{ keyword }}&filter_by=2&sort={{ sort }}"><div><i class="fas fa-pen-nib ico_screenplay"></i></i> sceneggiatura</div></a>
            <a href="?keyword={{ keyword }}&filter_by=8&sort={{ sort }}"><div><i class="fas fa-palette ico_art-direction"></i> scenografia</div>
        </div>
        <div class="filter-box">
            <a href="?keyword={{ keyword }}&filter_by=3&sort={{ sort }}"><div><i class="far fa-smile-wink ico_acting"></i> recitazione</div></a>
            <a href="?keyword={{ keyword }}&filter_by=9&sort={{ sort }}"><div><i class="fas fa-mask ico_costume"></i> costume</div></a>
        </div>
        <div class="filter-box">
            <a href="?keyword={{ keyword }}&filter_by=4&sort={{ sort }}"><div><i class="fas fa-video ico_photograph"></i> fotografia</i></div></a>
            <a href="?keyword={{ keyword }}&filter_by=10&sort={{ sort }}"><div><i class="fas fa-magic ico_makeup"></i> truccatura</div></a>
        </div>
        <div class="filter-box">
            <a href="?keyword={{ keyword }}&filter_by=5&sort={{ sort }}"><div><i class="fas fa-cut ico_editing"></i> montaggio</div></a>
            <a href="?keyword={{ keyword }}&filter_by=11&sort={{ sort }}"><div><i class="fas fa-music ico_music"></i>  musica</div></a>
        </div>
        <div class="filter-box">
            <a href="?keyword={{ keyword }}&filter_by=6&sort={{ sort }}"> <div><i class="fas fa-meteor ico_VFX"></i> VFX</div></a>
           
        </div>
    </div>
    
    <div id="student_sort-by">
        <a href="?keyword={{ keyword }}&sort_by=az&filter_by={{ filter_by }}">
            <span>
                <i class="fas fa-sort-alpha-down"></i>   A-Z
            </span>
        </a>
        <a href="?keyword={{ keyword }}&sort_by=za&filter_by={{ filter_by }}">
            <span>
                <i class="fas fa-sort-alpha-down-alt"></i>   Z-A
            </span>
        </a>
        
    </div>
    <div id="student-list_grid">
        {% for student in students %}
            <a href="{% url 'users:user_profile' student.pk %}">
                <div class="student-namecard">
                    <div class="namecard_row">
                        <div class="user_avatar_medium" style="background-image: url({{student.avatar.url}});"></div>
                        <div class="namecard_fullname">
                            <div>{{student.first_name}}</div>
                            <div>{{student.last_name}}</div>
                        </div>
                    </div>
                    <div class="namecard_row">
                        <span>{{student.school}}</span>
                    </div>
                    <div class="namecard_row">
                        <!-- dei ruoli preferiti -->
                        {% for work in student.works.all %}
                            {% if work.name == "regia" %} <!-- {{work}}는 되는데 .name 해줘야하는 이유? -->
                                <i class="fas fa-bullhorn ico_direction"></i>
                            {% elif work.name == "sceneggiatura" %}
                                <i class="fas fa-pen-nib ico_screenplay"></i>
                            {% elif work.name == "recitazione" %}
                                <i class="far fa-smile-wink ico_acting"></i>  
                            {% elif work.name == "fotografia" %}
                                <i class="fas fa-video ico_photograph"></i>
                            {% elif work.name == "montaggio" %}
                                <i class="fas fa-cut ico_editing"></i>
                            {% elif work.name == "VFX" %}
                                <i class="fas fa-meteor ico_VFX"></i>
                            {% elif work.name == "audio" %}
                                <i class="fas fa-microphone-alt ico_audio"></i>
                            {% elif work.name == "scenografia" %}
                                <i class="fas fa-palette ico_art-direction"></i>
                            {% elif work.name == "costume" %}
                                <i class="fas fa-mask ico_costume"></i>
                            {% elif work.name == "truccatura" %}
                                <i class="fas fa-magic ico_makeup"></i>  
                            {% elif work.name == "musica" %}
                                <i class="fas fa-music ico_music"></i>
                        {% endif %}     
                    {% endfor %}
                    </div>
                </div>
            </a>
        {% endfor %}  
    </div>
    

    <div class="paginator">
        <div>
            {% if start_index != 0 %}
                <span><a href="?keyword={{ keyword }}&sort={{ sort }}&page={{start_index}}"><i class="fas fa-chevron-circle-left"></i></a></span>
            {% endif %}
        </div>
        <div>
                {% for page in page_range %}
                    {% if current_page == page %}
                        <div class="current-page"><span>{{page}}</span></div>
                    {% else %}
                        <span><a href="?keyword={{ keyword }}&sort={{ sort }}&page={{page}}">{{page}}</a></span>
                    {% endif %}
                {% endfor %}
        </div>
        <div>
            {% if next_index < max_index %}
                <span><a href="?keyword={{ keyword }}&sort={{ sort }}&page={{next_index}}"><i class="fas fa-chevron-circle-right"></i></a></span>
            {% endif %}
        </div>
    </div>
{% endblock content %}